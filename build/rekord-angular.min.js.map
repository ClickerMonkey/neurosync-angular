{"version":3,"sources":["rekord-angular.min.js"],"names":["root","factory","define","amd","Rekord","angular","module","exports","global","require","this","ng","undefined","InitializeRekord","$http","$filter","Rest","database","RestFactory","api","Rekord_rest","call","ajax","options","success","failure","then","buildURL","db","model","$key","formatDate","date","format","prototype","removeTrailingSlash","x","charAt","length","substring","Angular","all","execute","get","create","encoded","update","remove","query","url","data","method","isEmpty","extraOptions","offlineValue","debug","Debugs","REST","forceOffline","onRestSuccess","response","onRestError","status","vars","transfer","isObject","adjustOptions","isFormatInput","Rests","setRest","listenToNetworkStatus","rest","noop","RestClass","Sync","scope","target","callback","on","Select","source","select","fill","$onRemove","bind","$handleRemove","$onRemoves","$handleRemoves","$onCleared","$handleCleared","$onReset","$handleReset","$reset","$select","hasModule","moduleName","tested","e","getRouteParameter","cached","buildParamResolver","$stateParams","$route","current","buildTemplateResolver","routeParams","text","isString","ResolveInput","obj","resolver","resolved","prop","ModelFilter","models","toArray","array","ids","i","splice","app","isFunction","isArray","isBoolean","isRekord","Resolve","Factory","a","Array","Database","targetFunction","$change","off","notify","$on","$evalAsync","apply","ScopeDigest","$source","$disconnect","$connect","Collection","Events","Remove","Removes","Cleared","Reset","key","keyHandler","buildKeyFromInput","keys","$selection","out","selection","push","removed","has","ModelCollection","selectable","name","$q","routing","defer","cachedValue","resolve","paramResolver","templateResolver","cache","promise","resolvedValue","param","$inject","inject","arguments","arg","input","resolvedInput","grabModel","instance","reject","fetch","fetchAll","grab","grabAll","properties","dontSave","cascade","resolvedProperties","$isSaved","$once","Model","RemoteSaves","search","props","resolvedQuery","remoteQuery","$promise","searchAt","index","paging","resolvedIndex","complete","result","ready","where","whereProperties","whereValue","whereEquals","resolvedWhereProperties","resolvedWhereValue","filtered","helper","impl","ref","rekord","run","paged","searchPaged","context","lazyLoad","initialized","remoteLoaded","refresh","value","equals","filter","Bind"],"mappings":"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","file":"rekord-angular.min.js","sourcesContent":["/* rekord-angular 1.5.6 - A rekord binding to angular - implementing Rekord.rest by Philip Diffenderfer */\n// UMD (Universal Module Definition)\n(function (root, factory)\n{\n  if (typeof define === 'function' && define.amd) // jshint ignore:line\n  {\n    // AMD. Register as an anonymous module.\n    define(['rekord', 'angular'], function(Rekord, angular) { // jshint ignore:line\n      return factory(root, Rekord, angular);\n    });\n  }\n  else if (typeof module === 'object' && module.exports)  // jshint ignore:line\n  {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(global, require('rekord'), require('angular'));  // jshint ignore:line\n  }\n  else\n  {\n    // Browser globals (root is window)\n    root.Rekord = factory(root, root.Rekord, root.angular);\n  }\n}(this, function(global, Rekord, ng, undefined)\n{\n\n  var app = ng.module('rekord', []);\n\n  var isFunction = Rekord.isFunction;\n  var isString = Rekord.isString;\n  var isArray = Rekord.isArray;\n  var isObject = Rekord.isObject;\n  var isBoolean = Rekord.isBoolean;\n  var isRekord = Rekord.isRekord;\n  var isEmpty = Rekord.isEmpty;\n  var isFormatInput = Rekord.isFormatInput;\n  \n  var format = Rekord.format;\n  var bind = Rekord.bind;\n  var noop = Rekord.noop;\n  var transfer = Rekord.transfer;\n\n  var Rekord_rest = Rekord.rest;\n\n  var Resolve = {};\n  var Factory = {};\n\n  ng.isArray = function(a)\n  {\n    return a instanceof Array;\n  };\n\n\nfunction InitializeRekord($http, $filter)\n{\n  function Rest(database)\n  {\n    this.database = database;\n  }\n\n  Rest.prototype =\n  {\n    removeTrailingSlash: function(x)\n    {\n      return x.charAt(x.length - 1) === '/' ? x.substring(0, x.length - 1) : x;\n    },\n    buildURL: function(model)\n    {\n      return this.removeTrailingSlash( Rekord.Angular.buildURL( this.database, model ) );\n    },\n    all: function( options, success, failure )\n    {\n      this.execute( 'GET', null, undefined, this.buildURL(), options, success, failure, [] );\n    },\n    get: function( model, options, success, failure )\n    {\n      this.execute( 'GET', model, undefined, this.buildURL( model ), options, success, failure );\n    },\n    create: function( model, encoded, options, success, failure )\n    {\n      this.execute( 'POST', model, encoded, this.buildURL(), options, success, failure, {} );\n    },\n    update: function( model, encoded, options, success, failure )\n    {\n      this.execute( 'PUT', model, encoded, this.buildURL( model ), options, success, failure, {} );\n    },\n    remove: function( model, options, success, failure )\n    {\n      this.execute( 'DELETE', model, undefined, this.buildURL( model ), options, success, failure, {} );\n    },\n    query: function( url, data, options, success, failure )\n    {\n      var method = isEmpty( data ) ? 'GET' : 'POST';\n\n      this.execute( method, null, data, url, options, success, failure );\n    },\n    execute: function( method, model, data, url, extraOptions, success, failure, offlineValue )\n    {\n      Rekord.debug( Rekord.Debugs.REST, this, method, url, data );\n\n      if ( Rekord.forceOffline )\n      {\n        failure( offlineValue, 0 );\n      }\n      else\n      {\n        var onRestSuccess = function(response)\n        {\n          success( response.data );\n        };\n\n        var onRestError = function(response)\n        {\n          failure( response.data, response.status );\n        };\n\n        var vars = transfer( Rekord.Angular.vars, transfer( model, {} ) );\n        var options = transfer( Rekord.Angular.options, {\n          method: method,\n          data: data,\n          url: url\n        });\n\n        if ( isObject( extraOptions ) )\n        {\n          transfer( options, extraOptions );\n\n          if ( isObject( extraOptions.vars ) )\n          {\n            transfer( extraOptions.vars, vars );\n          }\n        }\n\n        Rekord.Angular.adjustOptions( options, this.database, method, model, data, url, vars, success, failure );\n\n        if ( isFormatInput( options.url ) )\n        {\n          options.url = format( options.url, vars );\n        }\n\n        Rekord.Angular.ajax( options, onRestSuccess, onRestError );\n      }\n    }\n  };\n\n  function RestFactory(database)\n  {\n    if ( !database.api )\n    {\n      return Rekord_rest.call( this, database );\n    }\n\n    return new Rest( database );\n  }\n\n  function ajax(options, success, failure)\n  {\n    $http( options ).then( success, failure );\n  }\n\n  function buildURL(db, model)\n  {\n    return model ? db.api + model.$key() : db.api;\n  }\n\n  function formatDate(date, format)\n  {\n    return $filter('date')( date, format );\n  }\n\n  Rekord.Rests.Angular = RestFactory;\n  Rekord.setRest( RestFactory );\n\n  Rekord.listenToNetworkStatus();\n\n  Rekord.formatDate = formatDate;\n\n  Rekord.Angular =\n  {\n    rest: RestFactory,\n    options: {},\n    vars: {},\n    adjustOptions: noop,\n    ajax: ajax,\n    buildURL: buildURL,\n    RestClass: Rest\n  };\n}\n\nfunction Sync( scope, target, callback )\n{\n  if ( !(this instanceof Sync) )\n  {\n    return new Sync( scope, target, callback );\n  }\n\n  this.scope = scope;\n  this.target = target;\n  this.callback = callback;\n\n  this.on();\n}\n\nSync.prototype =\n{\n  on: function()\n  {\n    var target = this.target;\n\n    if ( isRekord( target ) )\n    {\n      target = this.target = target.Database;\n    }\n\n    var targetFunction = target.$change ? '$change' : 'change';\n\n    if ( target[ targetFunction ] )\n    {\n      this.off = target[ targetFunction ]( this.notify, this );\n\n      this.scope.$on( '$destroy', this.off );\n    }\n  },\n  notify: function()\n  {\n    // $digest would be better for performance - but there's no official way\n    // to see if a digest cycle is currently running\n    this.scope.$evalAsync();\n\n    if ( isFunction( this.callback ) )\n    {\n      this.callback.apply( this.target );\n    }\n\n    Rekord.debug( Rekord.Debugs.ScopeDigest, this, this.scope );\n  }\n};\n\n\nfunction Select(source, select, fill)\n{\n  this.$onRemove  = bind( this, this.$handleRemove );\n  this.$onRemoves = bind( this, this.$handleRemoves );\n  this.$onCleared = bind( this, this.$handleCleared );\n  this.$onReset   = bind( this, this.$handleReset );\n\n  this.$reset( source );\n  this.$select( select, fill );\n}\n\nSelect.prototype =\n{\n\n  $reset: function(source)\n  {\n    if ( this.$source !== source )\n    {\n      if ( this.$source )\n      {\n        this.$disconnect();\n      }\n\n      this.$source = source;\n      this.$connect();\n    }\n  },\n\n  $connect: function()\n  {\n    this.$source.on( Rekord.Collection.Events.Remove, this.$onRemove );\n    this.$source.on( Rekord.Collection.Events.Removes, this.$onRemoves );\n    this.$source.on( Rekord.Collection.Events.Cleared, this.$onCleared );\n    this.$source.on( Rekord.Collection.Events.Reset, this.$onReset );\n  },\n\n  $disconnect: function()\n  {\n    this.$source.off( Rekord.Collection.Events.Remove, this.$onRemove );\n    this.$source.off( Rekord.Collection.Events.Removes, this.$onRemoves );\n    this.$source.off( Rekord.Collection.Events.Cleared, this.$onCleared );\n    this.$source.off( Rekord.Collection.Events.Reset, this.$onReset );\n  },\n\n  $select: function(select, fill)\n  {\n    if ( isArray( select ) )\n    {\n      var db = this.$source.database;\n      var remove = {};\n\n      for (var key in this)\n      {\n        if ( isBoolean( this[ key ] ) )\n        {\n          remove[ key ] = this[ key ];\n        }\n      }\n\n      for (var i = 0; i < select.length; i++)\n      {\n        var key = db.keyHandler.buildKeyFromInput( select[ i ] );\n\n        this[ key ] = true;\n\n        delete remove[ key ];\n      }\n\n      for (var key in remove)\n      {\n        delete this[ key ];\n      }\n\n      if ( fill )\n      {\n        var keys = this.$source.keys();\n\n        for (var i = 0; i < keys.length; i++)\n        {\n          var key = keys[ i ];\n\n          if ( !this[ key ] )\n          {\n            this[ key ] = false;\n          }\n        }\n      }\n\n    }\n  },\n\n  $selection: function(out)\n  {\n    var source = this.$source;\n    var selection = out || [];\n\n    for (var key in this)\n    {\n      if ( this[ key ] === true )\n      {\n        var model = source.get( key );\n\n        if ( model )\n        {\n          selection.push( model );\n        }\n      }\n    }\n\n    return selection;\n  },\n\n  $handleRemove: function(removed)\n  {\n    var db = this.$source.database;\n    var key = db.keyHandler.buildKeyFromInput( removed );\n\n    delete this[ key ];\n  },\n\n  $handleRemoves: function(removed)\n  {\n    for (var i = 0; i < removed.length; i++)\n    {\n      this.$handleRemove( removed[i] );\n    }\n  },\n\n  $handleCleared: function()\n  {\n    for (var key in this)\n    {\n      if ( isBoolean( this[ key ] ) )\n      {\n        delete this[ key ];\n      }\n    }\n  },\n\n  $handleReset: function()\n  {\n    var source = this.$source;\n\n    for (var key in this)\n    {\n      if ( isBoolean( this[ key ] ) )\n      {\n        if ( !source.has( key ) )\n        {\n          delete this[ key ];\n        }\n      }\n    }\n  }\n};\n\nRekord.ModelCollection.prototype.selectable = function(select, fill)\n{\n  return new Select( this, select, fill );\n};\n\n\nfunction hasModule(moduleName)\n{\n  if ( moduleName in hasModule.tested )\n  {\n    return hasModule.tested[ moduleName ];\n  }\n\n  try\n  {\n    ng.module( moduleName );\n\n    hasModule.tested[ moduleName ] = true;\n  }\n  catch (e)\n  {\n    hasModule.tested[ moduleName ] = false;\n  }\n\n  return hasModule.tested[ moduleName ];\n}\n\nhasModule.tested = {};\n\nfunction getRouteParameter()\n{\n  return getRouteParameter.cached ? getRouteParameter.cached : getRouteParameter.cached =\n    ( hasModule( 'ui.router' ) ? '$stateParams' :\n      ( hasModule( 'ngRoute' ) ? '$route' :\n        false ) );\n}\n\nfunction buildParamResolver()\n{\n  if ( hasModule( 'ui.router') )\n  {\n    return function($stateParams)\n    {\n      return $stateParams;\n    };\n  }\n  else if ( hasModule( 'ngRoute') )\n  {\n    return function($route)\n    {\n      return $route.current;\n    };\n  }\n  return function()\n  {\n    return false;\n  };\n}\n\nfunction buildTemplateResolver(routeParams)\n{\n  return function(text)\n  {\n    if ( isString( text ) && routeParams )\n    {\n      return format( text, routeParams );\n    }\n\n    return text;\n  };\n}\n\ngetRouteParameter.cached = null;\n\nResolve.factory = function( name, callback )\n{\n  var param = getRouteParameter();\n  var paramResolver = buildParamResolver();\n  var cache = false;\n  var cachedValue = void 0;\n\n  function factory($q, routing)\n  {\n    var defer = $q.defer();\n\n    if ( cachedValue !== void 0 )\n    {\n      defer.resolve( cachedValue );\n    }\n    else\n    {\n      var routeParams = paramResolver( routing );\n      var templateResolver = buildTemplateResolver( routeParams );\n\n      if ( cache )\n      {\n        defer.promise.then(function(resolvedValue)\n        {\n          cachedValue = resolvedValue;\n        });\n      }\n\n      Rekord.get( name ).success(function(model)\n      {\n        callback( model, defer, templateResolver );\n      });\n    }\n\n    return defer.promise;\n  }\n\n  factory.$inject = ['$q'];\n\n  if ( param )\n  {\n    factory.$inject.push( param );\n  }\n\n  factory.cache = function()\n  {\n    cache = true;\n\n    return factory;\n  };\n\n  factory.inject = function()\n  {\n    for (var i = 0; i < arguments.length; i++)\n    {\n      var arg = arguments[ i ];\n\n      if ( isArray( arg ) )\n      {\n        factory.$inject.push.apply( factory.$inject, arg );\n      }\n      else\n      {\n        factory.$inject.push( arg );\n      }\n    }\n\n    return factory;\n  };\n\n  return factory;\n};\n\nfunction ResolveInput(obj, resolver)\n{\n  if ( isObject( obj ) )\n  {\n    var resolved = {};\n\n    for (var prop in obj)\n    {\n      resolved[ prop ] = resolver( obj[ prop ] );\n    }\n\n    return resolved;\n  }\n\n  return resolver( obj );\n}\n\nResolve.model = function( name, input )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedInput = ResolveInput( input, templateResolver );\n\n    model.Database.grabModel( resolvedInput, function(instance)\n    {\n      if ( instance )\n      {\n        defer.resolve( instance );\n      }\n      else\n      {\n        defer.reject();\n      }\n    });\n  });\n};\n\nResolve.fetch = function( name, input, options )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedInput = ResolveInput( input, templateResolver );\n\n    model.fetch( resolvedInput, options, function(instance)\n    {\n      defer.resolve( instance );\n    });\n  });\n};\n\nResolve.fetchAll = function( name )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    model.fetchAll(function(models)\n    {\n      defer.resolve( models );\n    });\n  });\n};\n\nResolve.grab = function( name, input )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedInput = ResolveInput( input, templateResolver );\n\n    model.grab( resolvedInput, function(instance)\n    {\n      defer.resolve( instance );\n    });\n  });\n};\n\nResolve.grabAll = function( name )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    model.grabAll(function(models)\n    {\n      defer.resolve( models );\n    });\n  });\n};\n\nResolve.create = function( name, properties, dontSave, cascade, options )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedProperties = ResolveInput( properties, templateResolver );\n\n    if ( dontSave )\n    {\n      defer.resolve( new model( resolvedProperties ) );\n    }\n    else\n    {\n      var instance = model.create( resolvedProperties, cascade, options );\n\n      if ( instance.$isSaved() )\n      {\n        defer.resolve( instance );\n      }\n      else\n      {\n        instance.$once( Rekord.Model.Events.RemoteSaves, function()\n        {\n          defer.resolve( instance );\n        });\n      }\n    }\n  });\n};\n\nResolve.search = function( name, url, options, props )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedQuery = ResolveInput( url, templateResolver );\n    var remoteQuery = model.search( resolvedQuery, options, props, true );\n\n    remoteQuery.$promise.success(function()\n    {\n      defer.resolve( remoteQuery );\n    });\n\n    remoteQuery.$promise.failure(function()\n    {\n      defer.reject();\n    });\n  });\n};\n\nResolve.searchAt = function( name, index, url, paging, options, props )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedIndex = ResolveInput( index, templateResolver );\n    var resolvedQuery = ResolveInput( url, templateResolver );\n    var promise = model.searchAt( resolvedIndex, resolvedQuery, paging, options, props );\n\n    promise.complete(function(result)\n    {\n      defer.resolve( result );\n    });\n  });\n};\n\nResolve.all = function( name )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    model.Database.ready(function()\n    {\n      defer.resolve( model.all() );\n    });\n  });\n};\n\nResolve.where = function( name, whereProperties, whereValue, whereEquals )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    var resolvedWhereProperties = ResolveInput( whereProperties, templateResolver );\n    var resolvedWhereValue = ResolveInput( whereValue, templateResolver );\n\n    model.Database.ready(function()\n    {\n      defer.resolve( model.all().filtered( resolvedWhereProperties, resolvedWhereValue, whereEquals ) );\n    });\n  });\n};\n\nResolve.ready = function( name )\n{\n  return Resolve.factory( name, function(model, defer, templateResolver)\n  {\n    model.Database.ready(function()\n    {\n      defer.resolve( model );\n    });\n  });\n};\n\nFactory.helper = function(name, impl)\n{\n  var ref = null;\n\n  Rekord.get( name ).success(function(rekord)\n  {\n    ref = rekord;\n  });\n\n  return function FactoryImplementation()\n  {\n    if ( !ref )\n    {\n      throw name + ' Rekord failed to load or does not exist.';\n    }\n\n    return impl( ref );\n  };\n};\n\nFactory.search = function(name, url, options, props, run, paged)\n{\n  return Factory.helper( name, function(model)\n  {\n    return paged ?\n      model.searchPaged( url, options, props, run ) :\n      model.search( url, options, props, run );\n  });\n};\n\nFactory.ref = function(name, callback, context)\n{\n  return Factory.helper( name, function(model)\n  {\n    return model;\n  });\n};\n\nFactory.lazyLoad = function(name, callback, context)\n{\n  var initialized = {};\n\n  return Factory.helper( name, function(model)\n  {\n    if ( !model.Database.remoteLoaded && !(name in initialized) )\n    {\n      initialized[ name ] = true;\n\n      model.Database.refresh( callback, context );\n    }\n\n    return model;\n  });\n};\n\nFactory.filtered = function(name, where, value, equals)\n{\n  return Factory.helper( name, function(model)\n  {\n    return model.filtered( where, value, equals );\n  });\n};\n\nFactory.all = function(name)\n{\n  return Factory.helper( name, function(model)\n  {\n    return model.all();\n  });\n};\n\nFactory.fetchAll = function(name, callback, context)\n{\n  return Factory.helper( name, function(model)\n  {\n    return model.fetchAll( callback, context );\n  });\n};\n\nFactory.grabAll = function(name, callback, context)\n{\n  return Factory.helper( name, function(model)\n  {\n    return model.grabAll( callback, context );\n  });\n};\n\n\nfunction ModelFilter()\n{\n  return function filterModels(models)\n  {\n    if ( !models || !models.toArray )\n    {\n      return models;\n    }\n\n    var array = models.toArray();\n    var ids = {};\n\n    for (var i = 0; i < array.length; i++)\n    {\n      var model = array[ i ];\n\n      if ( !model.$key || model.$key() in ids )\n      {\n        array.splice( i--, 1 );\n      }\n      else\n      {\n        ids[ model.$key() ] = model;\n      }\n    }\n\n    return array;\n  };\n}\n\n\n  app\n    .run( ['$http', '$filter', InitializeRekord] )\n    .filter( 'models', ModelFilter )\n  ;\n\n  Rekord.Bind = Sync;\n  Rekord.Sync = Sync;\n  Rekord.Resolve = Resolve;\n  Rekord.Select = Select;\n  Rekord.Factory = Factory;\n  Rekord.Debugs.ScopeDigest = 100000;\n\n  return Rekord;\n\n}));\n"],"sourceRoot":"/source/"}