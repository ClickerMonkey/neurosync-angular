!function(t,e,n){function o(t){Neuro.rest=function(e){function o(e,n,o,r,a,i){function u(t){r(t.data)}function s(t){a(t.data,t.status)}if(Neuro.debug(Neuro.Debugs.REST,this,e,o,n),Neuro.forceOffline)a(i,0);else{var c={method:e,data:n,url:o};t(c).then(u,s)}}return{all:function(t,r){o("GET",n,e.api,t,r,[])},get:function(t,r,a){o("GET",n,e.api+t.$key(),r,a)},create:function(t,n,r,a){o("POST",n,e.api,r,a,{})},update:function(t,n,r,a){o("PUT",n,e.api+t.$key(),r,a,{})},remove:function(t,r,a){o("DELETE",n,e.api+t.$key(),r,a,{})},query:function(t,e,r){var a=t.method||"GET",i=t.data||n,u=t.url||t;o(a,i,u,e,r)}}};var e=Neuro.debug;return Neuro.debug=function(){f.debug&&e.apply(this,arguments)},Neuro.Debugs.ScopeEval=1e5,Neuro.listenToNetworkStatus(),Neuro}function r(){return a}function a(t,e,n){return this instanceof a?(this.scope=t,this.target=e,this.callback=n,this.notify=this.newNotification(),this.release=this.newRelease(),void this.on()):new a(t,e,n)}function i(t,e){return t.replace(h,function(t,n){return n in e?e[n]:""})}function u(t){if(t in u.tested)return u.tested[t];try{return angular.module(t),u.tested[t]=!0}catch(e){return u.tested[t]=!1}}function s(){return s.cached?s.cached:s.cached=u("ui.router")?"$stateParams":u("ngRoute")?"$route":!1}function c(){return u("ui.router")?function(t){return t}:u("ngRoute")?function(t){return t.current}:function(){return!1}}var f={debug:!1},l={};t.constant("NeuroResolve",l).constant("NeuroSettings",f).factory("Neuro",["$http",o]).factory("NeuroBind",r),e.NeuroBind=a,e.NeuroResolve=l,a.Events={Database:"updated",Model:"saved removed remote-update relation-update",Collection:"add adds sort remove reset",Page:"change",Scope:"$destroy"},a.prototype={on:function(){Neuro.isNeuro(this.target)&&(this.target=this.target.Database),this.target instanceof Neuro.Database?this.target.on(a.Events.Database,this.notify):this.target instanceof Neuro.Model?this.target.$on(a.Events.Model,this.notify):this.target instanceof Neuro.Collection?this.target.on(a.Events.Collection,this.notify):this.target instanceof Neuro.Page&&this.target.on(a.Events.Page,this.notify),this.scope.$on(a.Events.Scope,this.release)},off:function(){this.target instanceof Neuro.Database?this.target.off(a.Events.Database,this.notify):this.target instanceof Neuro.Model?this.target.$off(a.Events.Model,this.notify):this.target instanceof Neuro.Collection?this.target.off(a.Events.Collection,this.notify):this.target instanceof Neuro.Page&&this.target.off(a.Events.Page,this.notify)},newRelease:function(){var t=this;return function(){t.off()}},newNotification:function(){var t=this;return function(){t.scope.$evalAsync(function(){t.callback&&t.callback.apply(t.target),f.debug&&Neuro.debug("[Scope:$evalAsync]",t.scope)})}}};var h=/\{([^\}]+)\}/;u.tested={},s.cached=null,l.factory=function(t,e){var n=s(),o=c(),r=["$q",function(n,r){var a=n.defer(),i=o(r),u=u(i);return Neuro.get(t,function(t){e(t,a,u)}),a.promise}];return n&&r.splice(1,0,n),r},l.model=function(t,e){return l.factory(t,function(t,n,o){t.grabModel(o(e),function(t){t?n.resolve(t):n.reject()})})},l.fetch=function(t,e){return l.factory(t,function(t,n,o){n.resolve(t.fetch(o(e)))})},l.query=function(t,e){return l.factory(t,function(t,n,o){var r=t.query(o(e));r.success(function(){n.resolve(r)}),r.failure(function(){n.reject()})})},l.all=function(t){return l.factory(t,function(t,e,n){t.Database.ready(function(){e.resolve(t.all())})})},l.where=function(t,e,n,o){return l.factory(t,function(t,r,a){if(angular.isObject(e))for(var i in e)e[i]=a(e[i]);angular.isString(n)&&(n=a(n)),t.Database.ready(function(){r.resolve(t.all().filtered(e,n,o))})})}}(angular.module("neurosync",[]),window);
//# sourceMappingURL=neurosync-angular.min.js.map
